<html>
  <head>
    <title>Workshop - Transmit Security Platform</title>
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta charset="UTF-8">
    <link rel="stylesheet" href="main.css">
    
    <!-- Step1: Load & Initialize SDK -->
    <script src="https://platform-websdk.transmitsecurity.io/platform-websdk/latest/ts-platform-websdk.js" defer="true" id="ts-platform-script"></script> 
    <script>
      document.getElementById("ts-platform-script").addEventListener("load", function() {
        window.tsPlatform.initialize({ clientId: "<your client id>" });
      });
    </script>
    
    <!-- Step2: Report Action #1-->
    <script>
      async function reportAction(actionType) {
        window.tsPlatform.drs.triggerActionEvent(actionType).then((actionResponse) => {
          let actionToken = actionResponse.actionToken;
        });
      }
    </script>
    
    <!-- Step4: Set UserID -->
    <script>
      async function setUserId(userId) {
        var userid = document.getElementById("username").value;
        window.tsPlatform.drs.setAuthenticatedUser(userid);
      }
    </script>
    
    <!-- Step6: Clear User -->
    <script>
      async function clearUser() {
        window.tsPlatform.drs.clearUser();
      }
    </script>
    
  <body>
    <section class="wrapper">
    <div class="container">
        <div class="content">
            <h2 class="heading">Transmit Security Platform</h2>
            <h2 class="heading">Detection and Response Services</h2>

            <!-- Step2: Report Action #1-->
            <p>
              <button class="btn" onclick="reportAction('register')">register</button>
            </p>
          
            <!-- Step3: Report Action #2 -->
            <hr>
              <button class="btn" onclick="reportAction('login')">Login</button>
              <input type="text" id="username" class="textbox" placeholder="username"/>
              <input type="text" id="password" class="textbox" placeholder="password"/>
            </p>
      
            <!-- Step4: Set UserID -->
            <hr>
              <button class="btn" onclick="setUserId()">setUserId</button>
            </p>
            <hr>
      
            <!-- Step5: Report Action #3 -->
            <p>
              <button class="btn" onclick="reportAction('transaction')">transaction</button>
              <button class="btn" onclick="reportAction('checkout')">checkout</button>
              <button class="btn" onclick="reportAction('password_reset')">password_reset</button>
            </p>
            <p>
              <button class="btn" onclick="reportAction('logout')">logout</button>
              <button class="btn" onclick="reportAction('account_details_change')">account_details_change</button>
              <button class="btn" onclick="reportAction('account_auth_change')">account_auth_change</button>
            </p>
            <p>
              <button class="btn" onclick="reportAction('withdraw')">withdraw</button>
              <button class="btn" onclick="reportAction('credits_change')">credits_change</button>
            </p>
            <hr>
      
            <!-- Step6: Clear User -->
            <p>
              <button class="btn" onclick="clearUser()">clear_user</button>
            </p>
      
        </div>
    </div>
    </section>
  </body>
</html>
